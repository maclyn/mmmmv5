[gd_scene load_steps=25 format=3 uid="uid://dkpdan17o8x1l"]

[ext_resource type="Script" path="res://maze_block.gd" id="1_4ffp3"]
[ext_resource type="PackedScene" uid="uid://8ggdbjul8d5x" path="res://corner.tscn" id="1_lfmuq"]
[ext_resource type="PackedScene" uid="uid://8jlfvxcekk5b" path="res://hedge_wall.tscn" id="2_1rctd"]
[ext_resource type="PackedScene" uid="uid://bhs5s6lrtjexd" path="res://models/key.glb" id="4_w8e5i"]
[ext_resource type="PackedScene" uid="uid://bttt1jbt1sie7" path="res://models/keyhole.glb" id="5_gaiax"]
[ext_resource type="PackedScene" uid="uid://ittim0h2qbue" path="res://models/derived/portal_derived.tscn" id="6_c73up"]
[ext_resource type="Shader" path="res://quicksand.gdshader" id="6_hu5kc"]
[ext_resource type="Environment" uid="uid://denqkg16qhgyr" path="res://player_camera_sun_env.tres" id="6_ikqls"]
[ext_resource type="FastNoiseLite" uid="uid://qxgicmjd74d2" path="res://quicksand_noise.tres" id="7_xg6gh"]
[ext_resource type="PackedScene" uid="uid://dow6mjsmlrx1t" path="res://models/spike.glb" id="10_mmi7b"]

[sub_resource type="BoxShape3D" id="BoxShape3D_d768j"]
size = Vector3(0.463318, 1, 1.22662)

[sub_resource type="BoxShape3D" id="BoxShape3D_agrt0"]
size = Vector3(0.673706, 3.30914, 3.54346)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4md2e"]
transparency = 1
albedo_color = Color(1, 1, 1, 0.254902)

[sub_resource type="BoxMesh" id="BoxMesh_8e8ep"]
material = SubResource("StandardMaterial3D_4md2e")
size = Vector3(4, 0.01, 4)

[sub_resource type="BoxShape3D" id="BoxShape3D_lt8bp"]
size = Vector3(3.6, 4, 0.1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_rel04"]
height = 0.05
radius = 1.25

[sub_resource type="Gradient" id="Gradient_nkhqm"]
offsets = PackedFloat32Array(0.0130293, 0.983713)
colors = PackedColorArray(0.394531, 0.26314, 0.078136, 1, 0.902344, 0.454348, 0.184915, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_yq4yf"]
noise_type = 0
seed = 5
frequency = 0.1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_qv1d1"]
width = 256
height = 256
seamless = true
color_ramp = SubResource("Gradient_nkhqm")
noise = SubResource("FastNoiseLite_yq4yf")

[sub_resource type="Gradient" id="Gradient_v3614"]
colors = PackedColorArray(0.956863, 0.708556, 0.105018, 1, 0.515625, 0.326869, 0.142718, 1)

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_cp2vf"]
width = 256
height = 256
seamless = true
color_ramp = SubResource("Gradient_v3614")
noise = ExtResource("7_xg6gh")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0raxk"]
render_priority = 0
shader = ExtResource("6_hu5kc")
shader_parameter/noise_tex_a = SubResource("NoiseTexture2D_qv1d1")
shader_parameter/noise_tex_b = SubResource("NoiseTexture2D_cp2vf")

[sub_resource type="QuadMesh" id="QuadMesh_hajgn"]
material = SubResource("ShaderMaterial_0raxk")
size = Vector2(2.5, 2.5)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_k1i3g"]
points = PackedVector3Array(-0.5, -1, 0, -0.23101, 0, -0.0957322, -0.46202, -1, -0.191366, -0.46202, -1, 0.191269, 0, 1, 0, -0.353563, -1, -0.353563, -0.353563, -1, 0.353465, 0.461922, -1, 0.191269, 0.5, -1, 0, 0.461922, -1, -0.191366, 0.353465, -1, -0.353563, 0.191269, -1, -0.46202, 0, -1, -0.5, -0.0957322, 0, -0.23101, -0.191366, -1, 0.461922, 0, -1, 0.5, 0.191269, -1, 0.461922, 0.353465, -1, 0.353465, -0.191366, -1, -0.46202)

[node name="MazeBlock" type="Node3D"]
script = ExtResource("1_4ffp3")

[node name="HedgeCornerNE" parent="." instance=ExtResource("1_lfmuq")]
transform = Transform3D(-4.72887e-07, 3.4969e-07, 1, -8.74225e-08, -1, 3.49691e-07, 1, -8.74223e-08, 4.72888e-07, 1.9, 0, -1.9)

[node name="HedgeCornerSE" parent="." instance=ExtResource("1_lfmuq")]
transform = Transform3D(-1, 6.48086e-13, -1.4862e-06, 3.2685e-13, 1, 6.99384e-07, 1.4862e-06, 6.99384e-07, -1, 1.9, 0, 1.9)

[node name="HedgeCornerNW" parent="." instance=ExtResource("1_lfmuq")]
transform = Transform3D(5.20546e-07, -4.37115e-07, 1, -6.99384e-07, -1, -4.37115e-07, 1, -6.99385e-07, -5.20548e-07, -1.9, 0, -1.9)

[node name="HedgeCornerSW" parent="." instance=ExtResource("1_lfmuq")]
transform = Transform3D(1, -8.74234e-08, 1.21598e-06, 8.74223e-08, 1, 2.62269e-07, -1.21598e-06, -2.62267e-07, 1, -1.9, 0, 1.9)

[node name="HedgeWallN" parent="." instance=ExtResource("2_1rctd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.9)
direction = "N"

[node name="HedgeWallS" parent="." instance=ExtResource("2_1rctd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.9)
visible = false
direction = "S"

[node name="HedgeWallE" parent="." instance=ExtResource("2_1rctd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 1.9, 0, 0)
visible = false
direction = "E"

[node name="HedgeWallW" parent="." instance=ExtResource("2_1rctd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -1.9, 0, 0)
direction = "W"

[node name="KeyRoot" type="StaticBody3D" parent="." groups=["key_group"]]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, -0.136383, 0)
visible = false
collision_layer = 4
collision_mask = 0

[node name="KeyCollider" type="CollisionShape3D" parent="KeyRoot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0384216, 0, 0.113312)
shape = SubResource("BoxShape3D_d768j")
disabled = true

[node name="Key" parent="KeyRoot" instance=ExtResource("4_w8e5i")]

[node name="ExitRoot" type="StaticBody3D" parent="." groups=["exit_group"]]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, -0.19, -1.69948)
visible = false
collision_layer = 4
collision_mask = 0

[node name="ExitCollider" type="CollisionShape3D" parent="ExitRoot" groups=["exit_group"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.163147, -0.0978088, -0.00708008)
shape = SubResource("BoxShape3D_agrt0")
disabled = true

[node name="Keyhole" parent="ExitRoot" instance=ExtResource("5_gaiax")]

[node name="InPathBlock" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, -8.72665e-05, 0, 1, 0, 8.72665e-05, 0, 1, 0, -1.98677, 0)
visible = false
mesh = SubResource("BoxMesh_8e8ep")

[node name="PortalBody" type="StaticBody3D" parent="." groups=["portal_group"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.44174)

[node name="PortalCollider" type="CollisionShape3D" parent="PortalBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.286952)
shape = SubResource("BoxShape3D_lt8bp")
disabled = true

[node name="PortalSurface" parent="PortalBody" instance=ExtResource("6_c73up")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 0.02, 0, 0, 0.364401)
visible = false

[node name="PortalViewport" type="SubViewport" parent="."]
render_target_update_mode = 1

[node name="PortalCamera" type="Camera3D" parent="PortalViewport"]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0.478444, -1.5)
top_level = true
cull_mask = 262143
environment = ExtResource("6_ikqls")
fov = 110.0

[node name="QuickSand" type="StaticBody3D" parent="." groups=["quicksand_group"]]

[node name="QuickSandCollider" type="CollisionShape3D" parent="QuickSand"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.95, 0)
shape = SubResource("CylinderShape3D_rel04")
disabled = true

[node name="QuickSandSurface" type="MeshInstance3D" parent="QuickSand"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, -1.96, 0)
visible = false
layers = 65536
cast_shadow = 0
mesh = SubResource("QuadMesh_hajgn")
skeleton = NodePath("../..")

[node name="Spike" type="StaticBody3D" parent="." groups=["spike_group"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="SpikeCollider" type="CollisionShape3D" parent="Spike"]
shape = SubResource("ConvexPolygonShape3D_k1i3g")
disabled = true

[node name="SpikeSurface" parent="Spike" instance=ExtResource("10_mmi7b")]
visible = false

[node name="SpikeSurface" parent="Spike/SpikeSurface" index="0"]
layers = 65536

[editable path="Spike/SpikeSurface"]
